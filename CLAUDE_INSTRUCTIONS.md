# LSP Diagnostic Protocol

`[claude-lsp-cli hook PostToolUse]:` = Automated diagnostic report from file type checking.

**Timing:** Appears after any tool use that modifies files.

**Format:** Compact JSON array on a single line for easy parsing.

## Output Format

```
[errors, warnings?, "file:line", "error_message", "X files"?]
```

**Fields:**

- `errors`: Number of errors found (always present)
- `warnings`: Number of warnings (only if > 0)
- `"file:line"`: First error location (filename:line)
- `"error_message"`: First error message (truncated to 40 chars)
- `"X files"`: Total file count (only if > 3 files affected)

## Examples

```json
[30, 2, "index.ts:15", "Type 'string' is not assignable to...", "8 files"]
```

= 30 errors, 2 warnings, first error at index.ts line 15, affecting 8 files

```json
[5, "main.py:23", "Undefined variable 'user'"]
```

= 5 errors, no warnings, first error at main.py line 23

```json
[0]
```

= No errors or warnings found

## Key Points

- Auto-generated by claude-lsp-cli hook, not user input
- Treat as informational feedback about code quality
- Compact format minimizes context usage
- Human-readable while being machine-parseable
